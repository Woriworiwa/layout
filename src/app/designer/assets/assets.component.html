<div class="flex flex-col gap-3 p-3 overflow-auto">
  <!-- Position Selector (only show when item is selected) -->
  @if (hasSelection()) {
    <div class="p-4 bg-[var(--p-content-background)] border border-[var(--p-content-border-color)] rounded-xl shadow-sm">
      <div class="text-[11px] font-medium text-[var(--p-text-muted-color)] mb-2 uppercase tracking-wide">Insert Position:</div>
      <p-selectButton
        [options]="insertPositions"
        [(ngModel)]="selectedInsertPosition"
        optionLabel="label"
        optionValue="value"
        styleClass="compact-select-button">
        <ng-template let-item pTemplate>
          <i [class]="item.icon"></i>
        </ng-template>
      </p-selectButton>
    </div>
  }

  <div class="flex flex-col gap-3">
    @for (item of components; track item.preset.presetId) {
      <div class="asset-card bg-[var(--p-content-background)] rounded-2xl cursor-pointer overflow-hidden transition-opacity"
           draggable="true"
           (click)="addItem(item.preset.presetId)"
           (dragstart)="onDragStart($event, item.preset.presetId)"
           (dragend)="onDragEnd($event)">
        <div class="p-3">
          <div class="text-sm font-semibold text-[var(--p-text-color)] mb-2 tracking-tight">{{ item.preset.presetName }}</div>
          <div class="asset-preview bg-[var(--p-surface-50)] rounded-lg p-3 min-h-[100px] flex items-center justify-center w-full">
            <ng-container *ngComponentOutlet="item.component; inputs: item.inputs" />
          </div>
        </div>
      </div>
    }
  </div>
</div>
